<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Emergency Response Planning Agent</title>
    <link rel="stylesheet" href="/static/styles.css">
</head>
<body>
    <a href="#main-content" class="skip-link">Skip to main content</a>

    <header role="banner">
        <h1>Emergency Response Planning Agent</h1>
        <p class="subtitle">NY State AI Hackathon - Multi-Agency Coordination System</p>
    </header>

    <nav role="navigation" aria-label="Main navigation">
        <ul>
            <li><a href="#scenario-section" class="active">Create Scenario</a></li>
            <li><a href="#weather-section">Weather</a></li>
            <li><a href="#evacuation-section">Evacuation</a></li>
            <li><a href="#historical-section">Historical</a></li>
        </ul>
    </nav>

    <main id="main-content" role="main">
        <!-- Scenario Creation Section -->
        <section id="scenario-section" aria-labelledby="scenario-heading">
            <h2 id="scenario-heading">Create Emergency Scenario</h2>

            <form id="scenario-form" aria-describedby="form-instructions">
                <p id="form-instructions" class="sr-only">
                    Fill out the form below to create an emergency scenario and generate a response plan.
                </p>

                <div class="form-group">
                    <label for="incident-type">Emergency Type</label>
                    <select id="incident-type" name="incident_type" required>
                        <option value="">Select type...</option>
                        <option value="hurricane">Hurricane</option>
                        <option value="fire">Fire</option>
                        <option value="flood">Flood</option>
                        <option value="earthquake">Earthquake</option>
                        <option value="chemical_spill">Chemical Spill</option>
                        <option value="public_health">Public Health</option>
                        <option value="terrorism">Terrorism</option>
                        <option value="infrastructure_failure">Infrastructure Failure</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="severity">Severity Level (1-5)</label>
                    <select id="severity" name="severity_level" required>
                        <option value="1">1 - Minimal</option>
                        <option value="2">2 - Minor</option>
                        <option value="3" selected>3 - Moderate</option>
                        <option value="4">4 - Severe</option>
                        <option value="5">5 - Catastrophic</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="location">Location</label>
                    <input type="text" id="location" name="location" required
                           placeholder="e.g., Manhattan, NYC" value="Manhattan, NYC">
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="latitude">Latitude</label>
                        <input type="number" id="latitude" name="lat" step="0.0001"
                               placeholder="40.7128" value="40.7128">
                    </div>
                    <div class="form-group">
                        <label for="longitude">Longitude</label>
                        <input type="number" id="longitude" name="lon" step="0.0001"
                               placeholder="-74.0060" value="-74.0060">
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="radius">Affected Area (miles)</label>
                        <input type="number" id="radius" name="affected_area_radius"
                               min="0.1" step="0.1" value="10" required>
                    </div>
                    <div class="form-group">
                        <label for="population">Est. Population Affected</label>
                        <input type="number" id="population" name="estimated_population_affected"
                               min="1" value="500000" required>
                    </div>
                </div>

                <div class="form-group">
                    <label for="duration">Duration (hours)</label>
                    <input type="number" id="duration" name="duration_hours"
                           min="1" value="72" required>
                </div>

                <button type="submit" id="create-btn">Create Scenario & Generate Plan</button>
            </form>

            <!-- Results Section -->
            <div id="results" class="results-panel" aria-live="polite" aria-atomic="true">
                <div id="loading" class="loading hidden" role="status">
                    <span class="spinner"></span>
                    Generating response plan...
                </div>

                <div id="plan-results" class="hidden">
                    <h3>Response Plan Generated</h3>
                    <div id="plan-summary"></div>
                    <div id="plan-agencies"></div>
                    <div id="plan-resources"></div>
                    <div id="plan-timeline"></div>
                    <div id="plan-actions"></div>
                </div>
            </div>
        </section>

        <!-- Weather Section -->
        <section id="weather-section" class="hidden" aria-labelledby="weather-heading">
            <h2 id="weather-heading">Weather Conditions</h2>
            <div id="weather-display"></div>
        </section>

        <!-- Evacuation Section -->
        <section id="evacuation-section" class="hidden" aria-labelledby="evacuation-heading">
            <h2 id="evacuation-heading">Evacuation Routes</h2>
            <div id="evacuation-routes"></div>
        </section>

        <!-- Historical Section -->
        <section id="historical-section" class="hidden" aria-labelledby="historical-heading">
            <h2 id="historical-heading">Historical Incidents</h2>
            <div id="historical-search">
                <input type="text" id="historical-query" placeholder="Search incidents...">
                <button id="search-btn">Search</button>
            </div>
            <div id="historical-results"></div>
        </section>
    </main>

    <footer role="contentinfo">
        <p>Emergency Response Planning Agent - NY State AI Hackathon 2026</p>
        <p>API Status: <span id="api-status">Checking...</span></p>
    </footer>

    <script src="/static/dashboard.js"></script>
</body>
</html>
